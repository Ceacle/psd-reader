<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>psd-reader Class: PsdReader</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">psd-reader</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="PsdReader.html">PsdReader</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
		<div class="span8">
			
				<div id="main">
					


	<h1 class="page-title">Class: PsdReader</h1>
<section>

<header>
    <h2>
    PsdReader
    </h2>
    
</header>

<article>
    <div class="container-overview">
    

    
        
<dt>
    <h4 class="name" id="PsdReader"><span class="type-signature"></span>new PsdReader<span class="signature">(options)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Create a new instance of PSD (Photoshop graphic data file) providing
either an URL to a PSD file, or an ArrayBuffer with the file loaded
in already. Prove onLoad and onError handlers to handle the
asynchronous nature.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>option object (required: url or buffer)</p>
                <h6>Properties</h6>
                

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		
		<th>Argument</th>
		

		
		<th>Default</th>
		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>URl to a PSD file (if not URL is provided, a buffer must be)</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">ArrayBuffer</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>ArrayBuffer containing data for a PSD file (if not buffer is provided, an URL must be)</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>onLoad</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>callback function when image has been loaded and parsed to RGBA. Optionally use <code>onload</code></p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>onError</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>callback function to handle errors. Optionally use <code>onerror</code></p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>gamma</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    1
                
                </td>
            

            <td class="description last"><p>use this gamma for conversion. Note: give inverse value, ie. 1/2.2 etc. 1 = no processing</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>gamma32</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>use this gamma for 32-bits conversion. Defaults to guessed system value (1/1.8 for Mac, 1/2.2 for others)</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>duotone</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    [255,255,255]
                
                </td>
            

            <td class="description last"><p>color to mix with duotone data, defaults to an array representing RGB for white [255, 255, 255].</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>passive</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>load data but don't parse and decode. use parse() to invoke manually.</p></td>
        </tr>

	
	</tbody>
</table>

            </td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

    
    </div>

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<dt class="name" id="buffer">
    <h4><span class="type-signature"></span>buffer<span class="type-signature"> :ArrayBuffer|null</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>Contains the original ArrayBuffer provided as option, or loaded
through XHR.</p>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">ArrayBuffer</span>
|

<span class="param-type">null</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        
            
<dt class="name" id="info">
    <h4><span class="type-signature"></span>info<span class="type-signature"> :object</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>Information object containing vital header information such
as width, height, depth, byteWidth, channels, bitmaps array,
pseudo chunks (buffer position and length), compression method
and color mode.</p>
<p>The following properties are public:</p>
<pre class="prettyprint source"><code>{number} width - width of bitmap in pixels
{number} height - height of bitmap in pixels
{number} channels - number of channels (red is one channel, alpha another etc.)
{number} depth - color depth (1/8/16/32 are valid values, indexed will have depth 8)
{number} indexes - number of actual indexes used with indexed files
{number} byteWidth - byte step to iterate a decompressed buffer
{number} colorMode - color mode value [0,15]
{string} colorDesc - textual description of color mode
{number} compression - compression type used (0,1,2,3 are valid values, although 2,3 are very rare, if any)
{string} compressionDesc - textual description of compression type
{number} channelSize - number of bytes per channel
{array}  chunks - list of main &quot;chunks&quot;. Should total 5.
{array}  bitmaps - array with bitmap data (always uncompressed) in original order.</code></pre>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">object</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        
            
<dt class="name" id="isParsed">
    <h4><span class="type-signature"></span>isParsed<span class="type-signature"> :boolean</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>Indicate if a file has been parsed. Useful with passive mode.</p>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">boolean</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        
            
<dt class="name" id="onerror">
    <h4><span class="type-signature"></span>onerror<span class="type-signature"> :function|null</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>onerror handler points to a function that will be called if any
errors occurs. If not specified the error will be thrown instead.</p>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">function</span>
|

<span class="param-type">null</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        
            
<dt class="name" id="onload">
    <h4><span class="type-signature"></span>onload<span class="type-signature"> :function|null</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>onload handler points to a function that will be called once
the file has been parsed.</p>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">function</span>
|

<span class="param-type">null</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        
            
<dt class="name" id="onready">
    <h4><span class="type-signature"></span>onready<span class="type-signature"> :function|null</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>onready handler points to a function that will be called once
the file has been loaded or given, but before parsed. Use this
with passive mode when an file is loaded asynchronously.</p>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">function</span>
|

<span class="param-type">null</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        
            
<dt class="name" id="rgba">
    <h4><span class="type-signature"></span>rgba<span class="type-signature"> :Uint8Array|null</span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>Holds the converted PSD as a 8-bit RGBA bitmap compatible with
canvas. The data can be set directly as a bitmap buffer for canvas:</p>
<p>For example (ctx being the canvas 2D context):</p>
<pre class="prettyprint source"><code>var idata = ctx.createImageData(w, h);  // create ImageData buffer
idata.data.set(psd.rgba);               // set the bitmap as source
ctx.putImageData(idata, x, y);          // update canvas</code></pre>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">Uint8Array</span>
|

<span class="param-type">null</span>


            </li>
        </ul>
    

    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    <h4 class="name" id="guessGamma"><span class="type-signature">&lt;static> </span>guessGamma<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Guess system display gamma. Gives only an approximation. Can be used
if display gamma is unknown. Will return (inverse) 1/1.8 for Mac,
1/2.2 for all others.</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">number</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="floatToComp"><span class="type-signature"></span>floatToComp<span class="signature">(channel, pos)</span><span class="type-signature"> &rarr; {number}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Convers a 32-bit floating point value to integer. It reads the value
from the given channel (which is of type DataView) at position pos.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>channel</code></td>
            

            <td class="type">
            
                
<span class="param-type">DataView</span>


            
            </td>

            

            

            <td class="description last"><p>channel to read from</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>pos</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>position to read from</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>converted integer value in the range [0, 255]</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">number</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="getGammaLUT"><span class="type-signature"></span>getGammaLUT<span class="signature">(gamma)</span><span class="type-signature"> &rarr; {Uint8ClampedArray}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Create a gamma look-up table (LUT) based on the provided inverse gamma.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>gamma</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>inverse gamma (ie. 1/2.2, 1/1.8 etc.)</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">Uint8ClampedArray</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="getIndexTable"><span class="type-signature"></span>getIndexTable<span class="signature">()</span><span class="type-signature"> &rarr; {Uint8Array|null}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Returns the indexed color table if present, or null. The number of
entries is always 256. The indexed color values are not interleaved,
but hold first the reds, greens then blue.</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">Uint8Array</span>
|

<span class="param-type">null</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="indexToInt"><span class="type-signature"></span>indexToInt<span class="signature">(tbl, index)</span><span class="type-signature"> &rarr; {number}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Convert a color index (when indexed mode) to little-endian unsigned
32-bit integer including full opaque for alpha channel. Can be set
directly on an Uin32Array view for a canvas buffer.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>tbl</code></td>
            

            <td class="type">
            
                
<span class="param-type">Uint8Array</span>


            
            </td>

            

            

            <td class="description last"><p>the table holding the color indexes</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>value from [0, 255]. Max depends on how many indexes the image contains.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>unsigned 32-bit integer in little-endian format (ABGR).</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">number</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="toCanvas"><span class="type-signature"></span>toCanvas<span class="signature">()</span><span class="type-signature"> &rarr; {HTMLCanvasElement|null}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Converts already loaded and parsed PSD file to canvas. A canvas element
is returned with the bitmap at the original size, or null if no RGBA
was being produced.</p>
<p>Example usage:</p>
<pre class="prettyprint source"><code>function callback(e) {
    var canvas = psd.toCanvas();
    ...
}</code></pre>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">HTMLCanvasElement</span>
|

<span class="param-type">null</span>


	</dd>
</dl>


        
    
    
</dd>

        </dl>
    

    

    
</article>

</section>




				</div>

				<div class="clearfix"></div>
				<footer>
					
					<p><b><a href='https://github.com/epistemex/'>Epistemex at GitHib</a></b></p>
					<br />
					
					
		<span class="copyright">
		Copyright &copy; 2015 Epistemex
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha10</a>
		on Fri Mar 13th 2015 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<div class="span3">
				<div id="toc"></div>
			</div>
			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : false,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>